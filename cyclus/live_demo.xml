<simulation>

  <control>
    <duration>540</duration>
    <startmonth>1</startmonth>
    <startyear>2023</startyear>
    <decay>never</decay>
  </control>

  <archetypes>
    <spec> <lib>cycamore</lib> <name>Source</name> </spec>
    <spec> <lib>cycamore</lib> <name>Sink</name> </spec>
    <spec> <lib>cycamore</lib> <name>Storage</name> </spec>
    <spec> <lib>cycamore</lib> <name>GrowthRegion</name> </spec>
    <spec> <lib>cycamore</lib> <name>ManagerInst</name> </spec>
  </archetypes>

  <commodity>
    <name>raw_pizza</name>
    <solution_priority>1.0</solution_priority>
  </commodity>
  <commodity>
    <name>cooked_pizza</name>
    <solution_priority>1.0</solution_priority>
  </commodity>
  <commodity>
    <name>dough</name>
    <solution_priority>1.0</solution_priority>
  </commodity>
  <commodity>
    <name>shredded_cheese</name>
    <solution_priority>1.0</solution_priority>
  </commodity>
  <commodity>
    <name>sauce</name>
    <solution_priority>1.0</solution_priority>
  </commodity>
  <commodity>
    <name>water</name>
    <solution_priority>1.0</solution_priority>
  </commodity>
  <commodity>
    <name>yeast</name>
    <solution_priority>1.0</solution_priority>
  </commodity>
  <commodity>
    <name>salt</name>
    <solution_priority>1.0</solution_priority>
  </commodity>
  <commodity>
    <name>flour</name>
    <solution_priority>1.0</solution_priority>
  </commodity>
  <commodity>
    <name>block_cheese</name>
    <solution_priority>1.0</solution_priority>
  </commodity>
  <commodity>
    <name>cut_pizza</name>
    <solution_priority>1.0</solution_priority>
  </commodity>

  <facility>
    <name>DinnerTable</name>
    <config>
      <Sink>
	      <in_commods>
		      <val>cut_pizza</val>
	      </in_commods>
      </Sink>
    </config>
  </facility>

  <facility>
    <name>CheeseStore</name>
    <config>
      <Source>
        <outcommod>block_cheese</outcommod>
      </Source>
    </config>
  </facility>
  <facility>
    <name>FlourStore</name>
    <config>
      <Source>
        <outcommod>flour</outcommod>
      </Source>
    </config>
  </facility>
  <facility>
    <name>YeastStore</name>
    <config>
      <Source>
        <outcommod>yeast</outcommod>
      </Source>
    </config>
  </facility>
  <facility>
    <name>SaltStore</name>
    <config>
      <Source>
        <outcommod>salt</outcommod>
      </Source>
    </config>
  </facility>
  <facility>
    <name>SauceStore</name>
    <config>
      <Source>
        <outcommod>sauce</outcommod>
      </Source>
    </config>
  </facility>
  <facility>
    <name>Faucet</name>
    <config>
      <Source>
        <outcommod>water</outcommod>
      </Source>
    </config>
  </facility>

  <facility>
    <name>Oven</name>
    <config>
      <Storage>
      <in_commods>
        <val>raw_pizza</val>
      </in_commods>
      <out_commods>
        <val>cooked_pizza</val>
      </out_commods>
      <residence_time>4</residence_time>
      </Storage>
    </config>
  </facility>
  <facility>
    <name>PizzaStone</name>
    <config>
      <Storage>
      <in_commods>
        <val>dough</val>
        <val>sauce</val>
        <val>shredded_cheese</val>
      </in_commods>
      <out_commods>
        <val>raw_pizza</val>
      </out_commods>
      <residence_time>1</residence_time>
      </Storage>
    </config>
  </facility>
  <facility>
    <name>MixingBowl</name>
    <config>
      <Storage>
      <in_commods>
        <val>water</val>
        <val>yeast</val>
        <val>salt</val>
        <val>flour</val>
      </in_commods>
      <out_commods>
        <val>dough</val>
      </out_commods>
      <residence_time>1</residence_time>
      </Storage>
    </config>
  </facility>
  <facility>
    <name>CheeseGrater</name>
    <config>
      <Storage>
      <in_commods>
        <val>block_cheese</val>
      </in_commods>
      <out_commods>
        <val>shredded_cheese</val>
      </out_commods>
      <residence_time>1</residence_time>
      </Storage>
    </config>
  </facility>

  <facility>
    <name>CuttingBoard</name>
    <config>
      <Storage>
      <in_commods>
        <val>cooked_pizza</val>
      </in_commods>
      <out_commods>
        <val>cut_pizza</val>
      </out_commods>
      <residence_time>1</residence_time>
      </Storage>
    </config>
  </facility>

  <region>
  <name>Region</name>
  <config>
    <GrowthRegion>
      <growth>
        <item>
          <commod>cut_pizza</commod>
          <piecewise_function>
            <piece>
              <start>0</start>
              <function>
                <type>linear</type>
                <params>8 0</params>
              </function> 
            </piece>
            <piece>
              <start>42</start>
              <function>
                <type>linear</type>
                <params>0 300</params>
              </function>
            </piece>
          </piecewise_function>
        </item>
      </growth> 
    </GrowthRegion>
  </config>

  <institution>
   <name>DeployCuttingBoard</name>
   <config>
     <ManagerInst>
       <prototypes>
         <val>CuttingBoard</val>
       </prototypes>
     </ManagerInst>
     </config>
     <initialfacilitylist>
        <entry>
          <prototype>DinnerTable</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>CheeseStore</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>FlourStore</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>YeastStore</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>SaltStore</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>SauceStore</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>Faucet</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>Oven</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>PizzaStone</prototype>
          <number>1</number>
        </entry><entry>
          <prototype>MixingBowl</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>CheeseGrater</prototype>
          <number>1</number>
        </entry>
      </initialfacilitylist>
    </institution>
  </region>

</simulation>
